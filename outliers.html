<!DOCTYPE html>
<html style="font-size: 16px;">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="INTUITIVE">
    <meta name="description" content="">
    <meta name="page_type" content="np-template-header-footer-from-plugin">
    <title>OUTLIERS</title>
    <link rel="stylesheet" href="nicepage.css" media="screen">
<link rel="stylesheet" href="OUTLIERS.css" media="screen">
    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 4.1.0, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i">
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "Site1",
		"logo": "images/default-logo.png"
}</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="OUTLIERS">
    <meta property="og:description" content="">
    <meta property="og:type" content="website">
  </head>
  <body class="u-body"><header class="u-clearfix u-header u-header" id="sec-d9b0"><div class="u-clearfix u-sheet u-sheet-1">
        <a href="https://nicepage.com" class="u-image u-logo u-image-1">
          <img src="images/default-logo.png" class="u-logo-image u-logo-image-1">
        </a>
        <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1">
          <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px;">
            <a class="u-button-style u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="#">
              <svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use></svg>
              <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><symbol id="menu-hamburger" viewBox="0 0 16 16" style="width: 16px; height: 16px;"><rect y="1" width="16" height="2"></rect><rect y="7" width="16" height="2"></rect><rect y="13" width="16" height="2"></rect>
</symbol>
</defs></svg>
            </a>
          </div>
          <div class="u-custom-menu u-nav-container">
            <ul class="u-nav u-unstyled u-nav-1"><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="index.html" style="padding: 10px 20px;">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="About.html" style="padding: 10px 20px;">About</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="Contact.html" style="padding: 10px 20px;">Contact</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="EDA.html" style="padding: 10px 20px;">EDA</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="OUTLIERS.html" style="padding: 10px 20px;">OUTLIERS</a>
</li></ul>
          </div>
          <div class="u-custom-menu u-nav-container-collapse">
            <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
              <div class="u-inner-container-layout u-sidenav-overflow">
                <div class="u-menu-close"></div>
                <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="index.html" style="padding: 10px 20px;">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="About.html" style="padding: 10px 20px;">About</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Contact.html" style="padding: 10px 20px;">Contact</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="EDA.html" style="padding: 10px 20px;">EDA</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="OUTLIERS.html" style="padding: 10px 20px;">OUTLIERS</a>
</li></ul>
              </div>
            </div>
            <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
          </div>
        </nav>
      </div></header>
    <section class="u-clearfix u-section-1" id="sec-ca07">
      <div class="u-clearfix u-sheet u-sheet-1">
        <div class="u-clearfix u-expanded-width u-layout-wrap u-layout-wrap-1">
          <div class="u-layout">
            <div class="u-layout-row">
              <div class="u-container-style u-image u-layout-cell u-size-30 u-image-1" data-image-width="1600" data-image-height="1065">
                <div class="u-container-layout u-valign-top u-container-layout-1"></div>
              </div>
              <div class="u-align-center u-container-style u-layout-cell u-size-30 u-layout-cell-2">
                <div class="u-container-layout u-container-layout-2">
                  <h1 class="u-text u-text-1">OUâ€‹TLIERS</h1>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="u-clearfix u-section-2" id="sec-cd05">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h2 class="u-text u-text-default u-text-1">What are outliers?</h2>
        <p class="u-text u-text-2">For starter, outliers have many names. They can be called aberration, exception, anomaly, outsider, and more. An outlier is something that is far away from the main group or from the majority. In statistics, they can be located at both ends of a normal distribution. For the reason that they are too far away from the mean, they may be a unit from another population.</p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_normal_distribution.JPG" alt="" data-image-width="425" data-image-height="280">
        <h2 class="u-text u-text-3">EDA</h2>
        <p class="u-text u-text-4">This is a dataset that I obtained from Kaggle's <a href="https://www.kaggle.com/uciml/pima-indians-diabetes-database" class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-palette-1-base u-btn-1">Pima Indians Diabetes Database</a>. This dataset has a lot outliers according to the <a href="http://odds.cs.stonybrook.edu/" class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-palette-1-base u-btn-2">ODDS</a> report, 35% outliers to be exact. There are many ways to detect outliers, namely visualization, Z-score, standard deviation, isolation forest, IQR score, and just plain old data sorting. This is not an exhaustive list of outliers detection project, however, I'll demostrate a few common methods used.
        </p>
        <p class="u-text u-text-5">What causes outliers? It can be human errors such as typo, fat finger, and brain fart. It can be equipment errors like sensor malfunction or scale not calibrated. It could be experimental errors like lab technician did not follow protocols properly. It could be intentional like cheating or dummy outliers made for testing purpose. It could be data processing errors such as unintentional mutations or data manipulation. It could be sampling error because the subjected population has some members from another population. It could also be a natural errors like mutation strain found in mosquitoes population, it's novelties in data that I am referring to.&nbsp;</p>
        <p class="u-text u-text-6">My take on keeping or removing outliers. As a data scientist, you may or may not be a domain expect or subject matter expert of certain field. If you are a doctor and also a data scientist then that's good. You may use your domain knowledge to determine what values are typical, unusual, and impossible. If you are not a doctor and you're trying to determine if you should keep or remove a value, work with the person with the domain knowledge to determine that. Removing values that are being represented as outliers statistically indiscriminately could means removing important content of the data. Sometimes the whole purpose of outliers analysis is to find the outliers and discard the others. A lot of genetic research such as pesticide development is to find the crop gene(s) that is resistance to the chemical so that when farmers use them, they won't harm the crops only the pests.</p>
      </div>
    </section>
    <section class="u-clearfix u-section-3" id="sec-b04a">
      <div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-text u-text-default u-text-1">Let us look at some basic information of the database.</p>
        <p class="u-align-left u-text u-text-2">Table 1 list of features</p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_head.JPG" alt="" data-image-width="901" data-image-height="302">
        <p class="u-text u-text-default u-text-3">Table 2 missing values and data size</p>
        <img class="u-image u-image-default u-image-2" src="images/outliers_isnull_and_shape.JPG" alt="" data-image-width="326" data-image-height="351">
        <p class="u-text u-text-default u-text-4">Table 2 shows that the database has no missing values and it has 768 rows and 9 columns. 768 rows representing 768 patients, it is not considered a large dataset by any means.</p>
      </div>
    </section>
    <section class="u-clearfix u-section-4" id="sec-4c47">
      <div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-align-left u-text u-text-1">Table 3 basic statistic measurement of the database</p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_describe.JPG" alt="" data-image-width="1087" data-image-height="365">
        <p class="u-text u-text-default u-text-2">Table 3 shows some basic measurements of the dataset. Did you notice anything wrong? This is when we need the domain knowledge to justify the legitimacy of the data. This means make or break when training the Machine Learning model if we don't handle the outliers properly. When it comes to Machine Learning, domain knowledge is of utmost importance. Data behavior, feature engineering, and performance matrix such as confusion matrix are all very important stuff when tuning the A.I. and they all rely on correct data input. If we feed the model garbage, we will get garbage output. In this case, I am using just common sense to verify the data in the red retangulars. Is it possible for a human being to have 0 blood glucose, 0 blood pressure, 0 skin thickness, and 0 BMI (Body Mass Index)? Common sense tells me that it is not possible. On the maximum values site, is it possible for a lady to pregnant 17 times? Is it possible to have 99 mm of tricep skin fold thickness? Is it possible to have 846 2-Hour serum insulin (mu U/ml)? BMI of 67 kg/m? They are unusual values, we can certainly get the answer from a medical personnel. In this analysis, we'll treat them as outliers.</p>
        <h2 class="u-text u-text-default u-text-3">Univariate visualization</h2>
        <p class="u-text u-text-default u-text-4">Table 4 outliers boxplot</p>
        <img class="u-image u-image-default u-image-2" src="images/outliers_boxplot.JPG" alt="" data-image-width="662" data-image-height="522">
      </div>
    </section>
    <section class="u-clearfix u-section-5" id="sec-a0ac">
      <div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-text u-text-default u-text-1">Table 4 are boxplots for all features in the database. The hollow round dots are data points that are too far away from the center. The insulin feature seems to have a lot of outliers and is overshadowing other features. Let's drop the insulin feature and re-plot to get a better view of other features.</p>
        <p class="u-align-left u-text u-text-2">Table 5 box plot after dropping insulin feature</p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_boxplot_drop_insulin.JPG" alt="" data-image-width="649" data-image-height="511">
        <p class="u-text u-text-default u-text-3">We do have some outliers in every features, some on the minimum side some on the maximum side. Their overall distribution are as follow:</p>
        <p class="u-align-left u-text u-text-4">Table 6 univariate distribution</p>
        <img class="u-image u-image-default u-image-2" src="images/outliers_univariate_distribution_plot.JPG" alt="" data-image-width="616" data-image-height="598">
        <img class="u-image u-image-default u-image-3" src="images/outliers_univariate_distribution_code.JPG" alt="" data-image-width="631" data-image-height="294">
      </div>
    </section>
    <section class="u-clearfix u-section-6" id="sec-2172">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h2 class="u-text u-text-default u-text-1">Multivariate visualization</h2>
        <p class="u-align-left u-text u-text-2">Table 7 multivariate boxplots</p>
        <img class="u-expanded-width u-image u-image-default u-image-1" src="images/outliers_mutivariate_boxplot.jpg" alt="" data-image-width="1500" data-image-height="696">
        <p class="u-text u-text-default u-text-3">Table 7 represents multivariate plot between positive/negative diabetes and each feature in the database. 0 represents non diabetic and 1 diabetic. Blood pressure seems a little higher for patients with diabetes. Skin a little bit thicker than non diabetic patients. Insulin level a little bit wide spread than non diabetic patients, meaning they can't control their blood sugar well. Diabetes patients seem to have thicker or bigger body judging from the BMI, their blood sugar level also a little bit higher and that's to be expected.</p>
        <p class="u-align-left u-text u-text-4">Table 8 multivariate scatterplots</p>
      </div>
    </section>
    <section class="u-clearfix u-section-7" id="sec-d57d">
      <div class="u-clearfix u-sheet u-sheet-1">
        <img class="u-expanded-width u-image u-image-1" src="images/outliers_multivariate_scatterplots.png" data-image-width="1595" data-image-height="1592">
      </div>
    </section>
    <section class="u-clearfix u-section-8" id="sec-5beb">
      <div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-text u-text-default u-text-1">In table 8, I did a pairplot of each possible combination of features. They are just for a quick glance purpose. Data scientists did this get a quick sense of the database relationship and also any outliers. We're looking for some sort of trending and anomalies.</p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_skinthickness_vs_bmi.JPG" alt="" data-image-width="613" data-image-height="325">
        <p class="u-align-left u-text u-text-2">Table 9 scatter plot BMI vs Skin Thickness and Insulin vs Glucose</p>
        <img class="u-image u-image-default u-image-2" src="images/outliers_insulin_vs_glucose.JPG" alt="" data-image-width="602" data-image-height="333">
        <p class="u-text u-text-default u-text-3">Zoom in on 2 scatter plots, we can tell that there are some outliers in them. We can also tell that they are positively correlated. In the case of BMI vs Skin Thickness, a person with higher BMI has thicker skin and skinny person has thiner skin. In the case of Insulin vs Glucose, as glucose level increase insulin level also increase.</p>
        <p class="u-text u-text-default u-text-4">Another visualization tool is violin plot. The name gives you a hint already, the plot looks like a violin. Let us look at a few examples.</p>
        <p class="u-align-left u-text u-text-5">Table 10 violin plot, blood pressure vs diabetes (0 for no 1 for yes)</p>
        <img class="u-image u-image-default u-image-3" src="images/outliers_violinplot_bloodpressure_vs_diabetes.JPG" alt="" data-image-width="815" data-image-height="336">
        <img class="u-image u-image-default u-image-4" src="images/outliers_violinplot_bloodpressure_vs_diabetes_zoomin1.JPG" alt="" data-image-width="814" data-image-height="519">
        <p class="u-text u-text-default u-text-6">Notice that patients with diabetes display higher blood pressure than non-diabetic patients. We can also see that there are some 0s at the the tail end of the violion. Those values indicate 0 blood pressure for both patients with diabetes and non-diabetes. We know that it is impossible for a human that is alive to have 0 blood pressure. Later in the post, I'll show you how I impute them and how I remove them.</p>
      </div>
    </section>
    <section class="u-clearfix u-section-9" id="sec-9fa4">
      <div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-align-left u-text u-text-1">Table 11 pregnancies vs diabetes</p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_violinplot_pregnancies_vs_diabetes.JPG" alt="" data-image-width="768" data-image-height="509">
        <p class="u-text u-text-default u-text-2">One interesting fact about this plot is that pregnancies somehow has some effect on diabetes, at this point it is logical to conclude that diabetic women had more pregnancies than non-diabetic women, which also infers that pregnancy can induce diabetes. The pregnancy frequency of diabetic population is higher than non-diabetic women. There are some 0 pregnancies in this graph and they are completely normal. We are not going to remove the 0 values in this category.</p>
        <p class="u-align-left u-text u-text-3">Table 12 replacing 0 blood pressure with median value of blood pressure</p>
        <img class="u-image u-image-default u-image-2" src="images/outliers_median_bloodpressure.JPG" alt="" data-image-width="865" data-image-height="253">
      </div>
    </section>
    <section class="u-clearfix u-section-10" id="sec-1367">
      <div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-text u-text-default u-text-1">In the snippet above, I am replacing the value of patients with 0 blood pressure with the value of median blood pressure from their respective diabetic or non-diabetic group. There are many center values to choose from, you have to consult your subject matter expert and use your common business sense to select the right one. In this case since we know that patients with diabetes have higher blood pressure than patients without diabetes. Mean values is a logical choice, however, the problem with mean is that they're highly susceptible to outliers. For example: If we were to measure average shoe size of men sold in a store. We collected 5 samples and they were&nbsp; 6, 7, 9, 10, 85. The average shoe size for men was 23.4. If we were to eliminate 85 and input 8.5 instead, we get 8.1. Median on the other hand not so much affected by extreme values. To get a median value, we first sort the number from small to large, so we get 6, 7, 9, 10, 85. We pick the center number, in this case it's 9. Now that we have this basic understanding, we're not going to use the sample average as our center value. The reason being, we have a lot of 0s in the database, and they'll lower the average blood pressure of the population and misinterpret the result. We're going to use the median value instead.</p>
        <p class="u-text u-text-2">First 2 lines of the code in table 12 I am capturing all the values of the database where patients are diagnosed as diabetic. I then capture non diabetic group's blood pressure as well. In the middle section of the code, I ask Numpy to replace the 0s in blood pressure from diabetic group with median of blood pressure from diabetic group. I did the same for non-diabetic group. The last 2 lines, I combine both new outomes back into the database. All I'm doing here is to mitigate a bad situation, we could introduce bias into the database if we're not careful. Ask yourself this question, is it possible that all 0s in the blood pressure are going to equal to the sample's median value? There is no perfect way to re-produce the measurement correctly. The best way is to do it right the first time.</p>
        <p class="u-align-left u-text u-text-3">Table 13 blood pressure minimum value after replacing the 0s</p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_replace_0_bloodpressure.JPG" alt="" data-image-width="1068" data-image-height="338">
        <p class="u-text u-text-default u-text-4">After defaulting all 0s to the median, our blood pressure minimum value is now 24 instead of 0. Since this snippet is working, we will use it to replace all other 0s (except pregnancies) in the database. We are going to put the code in a for loop and loop through all other features.</p>
      </div>
    </section>
    <section class="u-clearfix u-section-11" id="sec-ac07">
      <div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-align-left u-text u-text-1">Table 14 using for loop to replace all features with 0 as their minimum value except pregnancies.</p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_for_loop_replace_0.JPG" alt="" data-image-width="680" data-image-height="216">
        <p class="u-text u-text-default u-text-2">I am using a for loop to apply the blood pressure snippet to other features. The result is as follow:</p>
        <p class="u-align-left u-text u-text-3">Table 14 using for loop to replace all features with 0 as their minimum value except pregnancies.</p>
        <img class="u-image u-image-default u-image-2" src="images/outliers_for_loop_result1.JPG" alt="" data-image-width="1054" data-image-height="292">
        <p class="u-text u-text-default u-text-4">In the green highlighted area, all minimum values are now not 0s. Their respective standard deviation also within 2 digits and 1 digit range. Insulin's minimum value however on the other hand is still 0 and the feature's standard deviation is of 3 digits long, meaning it varies a lot. This is because when we line up all the insulin values, 0 is still at the center of the list. Let's try a straight forward approach. We will replace the 0s with median, no sort, just grab the 0s and replace them with median.</p>
      </div>
    </section>
    <section class="u-clearfix u-section-12" id="sec-e125">
      <div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-align-left u-text u-text-1">Table 15 replacing 0 values of insulin with its median</p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_replace_0_insulin_and_results.JPG" alt="" data-image-width="1079" data-image-height="386">
        <p class="u-text u-text-default u-text-2">The minimum value of insulin is now 14. We took care of the 0s at the lower end of the distribution. Let's not forget about the upper end. Since these maximum values are extreme, we know that they are not typical, but are they possible? It is possible for a woman to pregnant 17 times? Is it possible that the questionnaires weren't worded properly? May be the question was "how many kids do you have?" instead of "how many biological kids do you have?". For the problem with extreme values, we need to go back to the drawing board. Ask yourself, are you interested in capturing extreme values? Are you studying the impact of large event? Due to the rarity of such event, a normal distribution will not explain it well. There is a branch of statistics that do just that, it's called Extreme Value Theory (EVT). EVT highlights the extreme part of the data and model it seperately to answer questions related to extreme event. It is really important that we know what we are looking for in our outcome. We're looking forward to create a model that can predict if a person is potentially at risk of having diagnosed with diabetes or not? We don't need extreme values here. We will impute them.</p>
      </div>
    </section>
    <section class="u-clearfix u-section-13" id="sec-ce37">
      <div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-text u-text-1">Table 16 extreme pregnancy frequencies</p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_pregnancies_extreme_cases.JPG" alt="" data-image-width="491" data-image-height="334">
        <p class="u-text u-text-2">Table 16 is a bar plot on the count of women and their pregnancy frequencies. The red circle area are the outliers. Women who have over 14 biological offsprings are rare. There is another way to detect outliers, by using Z-score. What is a Z-score? A Z-score or sometimes called standard score is a measurement that tells you how far away a value is from the mean of the population or the sample.</p>
        <h2 class="u-align-left u-text u-text-3">Z-Score</h2>
        <p class="u-text u-text-4">Table 17 Z-score</p>
        <img class="u-image u-image-default u-image-2" src="images/outliers_z_scores.JPG" alt="" data-image-width="851" data-image-height="540">
        <p class="u-text u-text-5">Picture credit goes to:&nbsp;<br>https://www.gigacalculator.com/calculators/z-score-calculator.php
        </p>
      </div>
    </section>
    <section class="u-clearfix u-section-14" id="sec-5b38">
      <div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-align-left u-text u-text-1">Table 17 is an even bell-shaped normal distribution. If we cut this bell shape into 8 sections, the right section we have 1 through 4 sigma and the left section -1 through -4 sigma. Using Z formula:</p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_z_scores_formula.JPG" alt="" data-image-width="419" data-image-height="299">
        <p class="u-text u-text-default u-text-2">Picture credit goes to:<br>https://www.simplypsychology.org/z-score.html<br>
        </p>
        <p class="u-text u-text-3">We calculate Z values for every measurement in the dataset. Z-score standardized raw data into comparable index regardless of the measurement unit. Depends on which area of the distribution the score is in, we can decide whether we want to call that an outlier or not. Industrial standard defines that any Z-scores that are larger than 3 are considered to be outliers. Any Z-scores that are larger than 3 are essentially outside the 99.73% 3 sigma range and also outside of the 99% of confidence interval range. In another word, they're rare occurances.</p>
        <p class="u-align-left u-text u-text-4">Table 18 Z-score vs Confidence level</p>
        <div class="u-table u-table-responsive u-table-1">
          <table class="u-table-entity">
            <colgroup>
              <col width="44.5%">
              <col width="55.5%">
            </colgroup>
            <thead class="u-palette-4-base u-table-header u-table-header-1">
              <tr style="height: 44px;">
                <th class="u-border-1 u-border-palette-4-base u-table-cell">Confidence level</th>
                <th class="u-border-1 u-border-palette-4-base u-table-cell">Z-score</th>
              </tr>
            </thead>
            <tbody class="u-table-body">
              <tr style="height: 44px;">
                <td class="u-border-1 u-border-grey-30 u-first-column u-grey-5 u-table-cell u-table-cell-3">90%</td>
                <td class="u-border-1 u-border-grey-30 u-table-cell">1.65</td>
              </tr>
              <tr style="height: 44px;">
                <td class="u-border-1 u-border-grey-30 u-first-column u-grey-5 u-table-cell u-table-cell-5">95%</td>
                <td class="u-border-1 u-border-grey-30 u-table-cell">1.96</td>
              </tr>
              <tr style="height: 44px;">
                <td class="u-border-1 u-border-grey-30 u-first-column u-grey-5 u-table-cell u-table-cell-7">99%</td>
                <td class="u-border-1 u-border-grey-30 u-table-cell">2.58</td>
              </tr>
              <tr style="height: 44px;">
                <td class="u-border-1 u-border-grey-30 u-first-column u-grey-5 u-table-cell u-table-cell-9">99.9%</td>
                <td class="u-border-1 u-border-grey-30 u-table-cell">3.291</td>
              </tr>
            </tbody>
          </table>
        </div>
        <p class="u-text u-text-default u-text-5">Table 18 listed Z-score and their respective locations in the confidence interval. A Z-score of 2.58 is at 99% distribution point of a population, in another word it is at the tail end of a population. A Z-score of 3 puts the measured individual at the distribution point of 99.73%, that is the cut off point for us. Anything that scores over 3 we will consider it an outlier. Again, like I mentioned in project 1, we need to take into consideration of the outcome that we are looking for. Deleting outliers indiscriminately without consulting the SME (Subject Matter Expert) or the person with the domain knowledge could means a fruitless investment. For example, in a plant breeding project, a breeders may be looking for a high yield line. The high yield trait may consist of multiple quantitative genes. These superior genotype are hard to come by, the breeders may be using Neural Network to guide them through a reciprocal recurrent selection process to gather all the genes together in one plant. If we delete the outliers, meaning the NN will never learn from the data, therefore the breeders will never create such genotype. Ask the SME, do we need the extreme values as part of the outcome? Are the outliers relevant to the data and/or our research? Is it just a typo (therefore not relevant)?&nbsp;</p>
      </div>
    </section>
    <section class="u-align-center u-clearfix u-section-15" id="sec-1cc8">
      <div class="u-clearfix u-sheet u-valign-bottom u-sheet-1">
        <p class="u-text u-text-1">Table 19 Z-score list</p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_z_scores_list.JPG" alt="" data-image-width="605" data-image-height="260">
        <p class="u-align-left u-text u-text-default u-text-2">In table 19 we are using the stats package to calculate Z score of a numpy list. Highlighted value is one of the outliers. There should be plenty more in the list and we will filter them out.</p>
        <p class="u-text u-text-3">Table 20 single out Z &gt; 3 values</p>
        <img class="u-image u-image-default u-image-2" src="images/outliers_z_scores_threshold_3.JPG" alt="" data-image-width="829" data-image-height="197">
        <p class="u-align-left u-text u-text-default u-text-4">Unlike table 19, table 20 single out any Z scores that are larger than 3 and dispaly their indices. Table 20 displays the relative location of an outlier using its index, so the numbers you see in the table, they're indices, they're not the actual Z score like in table 19. We have quite a few of the outliers in this array.</p>
        <p class="u-text u-text-5">Table 21 drop all Z scores larger than 3</p>
        <img class="u-image u-image-default u-image-3" src="images/outliers_drop_z_larger_than_3.JPG" alt="" data-image-width="426" data-image-height="126">
        <p class="u-align-left u-text u-text-6">The top cell in table 21, I ask Pandas to to keep all Z scores that are smaller than 3, in another word, drop everything that are larger than 3. The second cell I ask Pandas to show me the remaining size of the database. If you scroll back to the top of the page, we started out with 768 patients and after dropping Z &gt; 3 outliers, we are now down to 719 patients. That is roughly 6.4% of data loss.</p>
      </div>
    </section>
    <section class="u-align-center u-clearfix u-section-16" id="sec-0ef1">
      <div class="u-align-left u-clearfix u-sheet u-sheet-1">
        <h2 class="u-text u-text-default u-text-1">IQR Score</h2>
        <p class="u-text u-text-2">If we divide a data set into 4 equal groups, it's called quartile or quantile. They are as shown in table 22. Each section of the quartile consist of 25% of the total dataset. Just to clarify the naming confusion, quartile is a special case of quantile. Quartiles go from 1 to 4. Quantiles can go from any portion to any portion. I also want to bring up a point here, not every database can be portioned equally. Some data may have multiple empty or quiet periods.&nbsp;</p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_IQR_range.JPG" alt="" data-image-width="439" data-image-height="188">
        <p class="u-align-left u-text u-text-3">Table 22 IQR range</p>
        <p class="u-text u-text-default u-text-4">Picure credit:<br>https://www.scribbr.com/statistics/interquartile-range/<br>
        </p>
        <p class="u-text u-text-default u-text-5">A quick walk through on how IQR score is calculated:<br>1. Sort the dataset from small to large.<br>2. Find the median of the dataset, which is the value of Q2.<br>3. Find the median below Q2 which will be the value of Q1.<br>4. Find the median above Q2 which will be the value of Q3.<br>5. IQR = Q3 - Q1.<br>6. lower limit = Q1 - (IQR * 1.5)<br>7. upper limit = Q3 + (IQR * 1.5)<br>8. Anything lower or greater than lower limit or upper limet are considred outliers.
        </p>
        <p class="u-align-left u-text u-text-6">Table 23 IQR boxplot</p>
        <img class="u-image u-image-default u-image-2" src="images/outliers_IQR_boxplot.JPG" alt="" data-image-width="664" data-image-height="342">
        <p class="u-text u-text-default u-text-7">Picture credit:<br>https://towardsdatascience.com/understanding-boxplots-5e2df7bcbd51<br>
        </p>
        <p class="u-align-left u-text u-text-8">Visual reprensentation of IQR for step 1 to step 8 can be displayed using a boxplot as shown in table 23.</p>
      </div>
    </section>
    <section class="u-clearfix u-section-17" id="sec-93bd">
      <div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-align-left u-text u-text-1">Table 24 IQR boxplot and its relative position in a normal distribution&nbsp;</p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_IQR_and_normal_distribution1.jpg" alt="" data-image-width="703" data-image-height="731">
        <p class="u-text u-text-2">Picture credit:<br>https://commons.wikimedia.org/wiki/File:Boxplot_vs_PDF.png<br>
        </p>
        <p class="u-text u-text-default u-text-3">Table 24 is comparing a boxplot of IQR and its relative position in a normal distribution and confidence interval graph. Directly beneath the boxplot is a normal distribution and its relative x-axis point of Q3 +- 1.5xIQR. The bottom graph is a normal distribution and the relative 2 sigma positions of the Q3 +- 1.5xIQR. Roughly speaking 68.27% of dataset lie within 1 sigma range and 95.45% lie within 2 sigma range.</p>
      </div>
    </section>
    <section class="u-clearfix u-section-18" id="sec-fc8b">
      <div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-align-left u-text u-text-1">Table 25 IQR scores</p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_IQR_scores.JPG" alt="" data-image-width="328" data-image-height="311">
        <p class="u-text u-text-default u-text-2">Table 25 are IQR scores of the dataset. These numbers have no meaning by themselves. They're for the calculation of IQR range.</p>
        <p class="u-align-left u-text u-text-3">Table 26 trimming datasaet using IQR</p>
        <img class="u-image u-image-default u-image-2" src="images/outliers_IQR_trim.JPG" alt="" data-image-width="982" data-image-height="61">
        <p class="u-text u-text-default u-text-4">We can now trim both exteme ends of the dataset to remove the outliers. We already removed some extereme values using Z scores, now we will continue to use the same partially cleaned database to remove even more outliers using IQR scores. Snippet in table 26 will remove both ends of the dataset.</p>
        <p class="u-align-left u-text u-text-5">Table 27 dataset size after removing both tails</p>
        <img class="u-image u-image-default u-preserve-proportions u-image-3" src="images/outliers_IQR_shape.JPG" alt="" data-image-width="229" data-image-height="69">
        <p class="u-text u-text-default u-text-6">We started out with 768 patients and after removing all extreme values, we're down to 646 patients. We lost 16% of the data, that is a lot of losses for a small dataset.</p>
      </div>
    </section>
    <section class="u-clearfix u-section-19" id="sec-909d">
      <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <p class="u-align-left u-text u-text-1">Table 28 boxplot trim and pre-trim plot</p>
        <img class="u-image u-image-default u-image-1" src="images/outlieres_IQR_plot_after_trim.JPG" alt="" data-image-width="639" data-image-height="493">
        <img class="u-image u-image-default u-image-2" src="images/outliers_boxplot1.JPG" alt="" data-image-width="662" data-image-height="522">
        <p class="u-text u-text-2">I put pre and post trim result together in table 28. Left side of the table is a post-trim boxplot and right side is pre-trim result. Most significant change I've noticed is the insulin feature. Compare the scale of insulin feature on both graphs, left side maxed out around 250 unit and right side maxed out around 800 unit. We have eliminated 122 (16%) patients but outliers are still in the picture.</p>
        <p class="u-text u-text-default u-text-3">Table 29 boxplot of post-trim dataset using seaborn</p>
        <img class="u-image u-image-default u-image-3" src="images/outlier_IQR_trim_seaborn.JPG" alt="" data-image-width="763" data-image-height="508">
        <p class="u-text u-text-default u-text-4">Table 29 is just another post-trim boxplot using seaborn. There are alot of tweaks and adjustment that can be done using seaborn. We're putting some colors on the plot and that's good enough for now.</p>
      </div>
    </section>
    <section class="u-clearfix u-section-20" id="sec-1d58">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h2 class="u-text u-text-default u-text-1">Impute data</h2>
        <p class="u-text u-text-default u-text-2">So far what we've done is to eliminate the extreme values or outliers. We've lost 122 valueable information by doing so. Whatelse can we do besides eliminating outliers? We can impute them with something reasonable. What is "reasonable"? That's up to our interpretation. The most reasonable approach is to consult a medical doctor in this case. Since we don't have a medical doctor here to give us advice, we can try to cap the data. The capping concept is different than the elimination concept. In capping, we don't eliminate.Similar to economy 101, financial institutes put a ceiling on the top and floor at the bottom of certain items to prevent inflation or depreciation. We're going to apply the same concept on the dataset. Any values that are larger than the cap will be set to equal to the cap and the same for the bottom cap.</p>
        <p class="u-text u-text-default u-text-3">Here rise another question, what's a reasonable cap? It's certainly not the outlier values, not anything in the vicinity of outliers, so what is it? It's the IQR range again this time. Instead of eliminating antyhing outside IQR range, this time we will cap them.</p>
        <p class="u-text u-text-4">For this to work, I will create an IQR function that I can call when I need it. The function will do nothing more than just the steps listed in table 22, see table 30.&nbsp;</p>
        <p class="u-align-left u-text u-text-5">Table 30 IQR function&nbsp;</p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_def_IQR.JPG" alt="" data-image-width="625" data-image-height="184">
        <p class="u-align-left u-text u-text-6">Table 31 calling find_limit function</p>
        <img class="u-image u-image-default u-image-2" src="images/outliers_find_limit.JPG" alt="" data-image-width="549" data-image-height="153">
        <p class="u-text u-text-default u-text-7">First line of table 21, I created 2 variables, lower_BP and upper_BP. I call find_limit function in table 30 to find the upper and lower IQR limit of blood pressure feature in the dataset. Repeat the same pattern for the other 5 features. If we have a lot of features in this dataset, we will use a for loop. For just 6 features, this is good enough. Every upper and lower variables will be populated with upper and lower IQR scores.</p>
      </div>
    </section>
    <section class="u-clearfix u-section-21" id="sec-c461">
      <div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-align-left u-text u-text-1">Table 32 capping the ourliers</p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_IQR_cap.JPG" alt="" data-image-width="1054" data-image-height="352">
        <p class="u-text u-text-default u-text-2">In table 32, we use the new upper/lower variables to cap the outliers. I use Numpy where function to locate values in blood pressure that are higher than upper_BP and replace them with upper_BP. The same goes to lower_BP. Repeat the work for the other features.</p>
        <p class="u-text u-text-default u-text-3">Table 33 comparing boxplot for capping and eliminating outliers</p>
        <img class="u-image u-image-default u-image-2" src="images/outliers_IQR_cap_boxplot.JPG" alt="" data-image-width="618" data-image-height="489">
        <img class="u-image u-image-default u-image-3" src="images/outlieres_IQR_plot_after_trim1.JPG" alt="" data-image-width="639" data-image-height="493">
        <p class="u-text u-text-default u-text-4">You may be asking, aren't these 2 plots look alike? We're just extending the whiskers of the boxplots to cover the outliers right? Looking back at table 28, we lost 122 patients after eliminating the outliers. We get to keep every patients using capping method in the left graph in table 33.</p>
      </div>
    </section>
    <section class="u-clearfix u-section-22" id="sec-22c3">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h2 class="u-text u-text-default u-text-1">Conclusion</h2>
        <p class="u-text u-text-default u-text-2">Thanks for reading! In this project, our main focus is on outliers detection and handling. We have used visualization tools such as boxplot, scatterplot, and bar plot to detect outliers visually. We have also used statistical methods like Z score and IQR score to identify and eliminate or transform the outliers. Whether or not we should remove outlier depends on the nature of the study. Here are some points for your consideration:</p>
        <p class="u-text u-text-default u-text-3">1. If outliers are due to typo, mistake in recording data, machine error, then they should be dropped. They are just error and irrelevant to the research.<br>
          <br>2. If the outliers do not change the result but change the statistical assumptions then drop the data but mention them in the presentation. Example could be insecticide research. It's assume that it'll be effective towards some type of insects, however there are a few that did not die after application. It's possible that the insects have developed resistance the insecticide.<br>
          <br>3. If the outliers affect both result and assumtion. Test the dataset both with and without outliers and report both results. The outliers may or may not be a mistake, it may just be a legitimate extreme situation in the dataset like the woman that pregnant 17 times in our dataset.<br>
          <br>4. If the outliers misguide a regression analysis, making 2 seemingly unrelated features related, or leading towards a conclusion of different regression&nbsp; model then they should be dropped. Which direction do you think the regression line should point to in the blood pressure vs BMI graph below? It looks like there's a big group in the center of the graph and a few outliers are misguiding the regression plot.<br>
        </p>
        <img class="u-image u-image-default u-image-1" src="images/outliers_BMI_vs_BloodPressure1.JPG" alt="" data-image-width="568" data-image-height="330">
        <p class="u-text u-text-4">For situations where we can't drop the outliers, we can do transformation to the original data using methods such as log transformation, square root transformation, minmax transformation, and standard transformation. We will talk about them in one of the project.&nbsp;</p>
      </div>
    </section>
    
    
    <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-5b18"><div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-small-text u-text u-text-variant u-text-1">Sample text. Click to select the text box. Click again or double click to start editing the text.</p>
      </div></footer>
    <section class="u-backlink u-clearfix u-grey-80">
      <a class="u-link" href="https://nicepage.com/website-templates" target="_blank">
        <span>Website Templates</span>
      </a>
      <p class="u-text">
        <span>created with</span>
      </p>
      <a class="u-link" href="" target="_blank">
        <span>Website Builder Software</span>
      </a>. 
    </section>
  </body>
</html>